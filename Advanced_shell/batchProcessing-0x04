#!/bin/bash

POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
DIR="pokemon_data_parallel"
mkdir -p "$DIR"

fetch_pokemon() {
    name=$1
    curl -s "https://pokeapi.co/api/v2/pokemon/$name" -o "$DIR/$name.json"

    if jq empty "$DIR/$name.json" 2>/dev/null; then
        echo "Fetched $name ✅"
    else
        echo "Error fetching $name ❌" >> errors.txt
    fi
}

echo "Running parallel fetch..."

for pokemon in "${POKEMON_LIST[@]}"; do
    fetch_pokemon "$pokemon" &
done

wait  # Wait for all background jobs

echo "All parallel fetches completed."
